import { Component, InputComponent } from '@wonderlandengine/api';
import { getChildByName } from '../utils/helper';

const poses =
{
    "neutral": {
        "left": [{ "name": "wrist", "rotation": [0, 0, 0, 1], "position": [0, 0, 0, 1, 2.3355237743771795e-8, -8.604434498238334e-9, -2.3371580226694277e-8, 0] }, { "name": "pinky-finger-tip", "rotation": [-0.3938332796096802, 0.11195112764835358, 0.23998808860778809, 0.8802091479301453], "position": [-0.3938332796096802, 0.11195112764835358, 0.23998808860778809, 0.8802091479301453, -0.01931926980614662, 0.0060404762625694275, -0.07280226051807404, 0.010437138378620148] }, { "name": "pinky-finger-phalanx-distal", "rotation": [-0.3938332796096802, 0.11195112764835358, 0.23998808860778809, 0.8802091479301453], "position": [-0.3938332796096802, 0.11195112764835358, 0.23998808860778809, 0.8802091479301453, -0.01805470883846283, 0.009792576543986797, -0.0629008486866951, 0.007826116867363453] }, { "name": "pinky-finger-phalanx-intermediate", "rotation": [-0.35612165927886963, 0.16835777461528778, 0.214679554104805, 0.8937258124351501], "position": [-0.35612165927886963, 0.16835777461528778, 0.214679554104805, 0.8937258124351501, -0.012771896086633205, 0.010330621153116226, -0.05506972223520279, 0.006192900240421295] }, { "name": "pinky-finger-phalanx-proximal", "rotation": [-0.22671864926815033, 0.14586883783340454, 0.15605156123638153, 0.9502467513084412], "position": [-0.22671864926815033, 0.14586883783340454, 0.15605156123638153, 0.9502467513084412, -0.012041970156133175, 0.0050603365525603294, -0.041118837893009186, 0.0031027456279844046] }, { "name": "pinky-finger-metacarpal", "rotation": [-0.018311822786927223, 0.14034287631511688, 0.20703591406345367, 0.968041718006134], "position": [-0.018311822786927223, 0.14034287631511688, 0.20703591406345367, 0.968041718006134, -0.009715897962450981, -0.0018666706746444106, -0.01819242537021637, 0.00397766288369894] }, { "name": "ring-finger-tip", "rotation": [-0.45925575494766235, 0.04036682844161987, 0.14490951597690582, 0.8754746913909912], "position": [-0.45925575494766235, 0.04036682844161987, 0.14490951597690582, 0.8754746913909912, -0.01152293011546135, 0.01249866932630539, -0.0835190862417221, 0.007203185930848122] }, { "name": "ring-finger-phalanx-distal", "rotation": [-0.45925575494766235, 0.04036682844161987, 0.14490951597690582, 0.8754746913909912], "position": [-0.45925575494766235, 0.04036682844161987, 0.14490951597690582, 0.8754746913909912, -0.010802527889609337, 0.017399365082383156, -0.07250657677650452, 0.005532326642423868] }, { "name": "ring-finger-phalanx-intermediate", "rotation": [-0.3560096323490143, 0.07861196994781494, 0.1164260059595108, 0.9238627552986145], "position": [-0.3560096323490143, 0.07861196994781494, 0.1164260059595108, 0.9238627552986145, -0.007043506950139999, 0.013400028459727764, -0.06213032081723213, 0.003975294530391693] }, { "name": "ring-finger-phalanx-proximal", "rotation": [-0.19426175951957703, 0.08680171519517899, 0.06551415473222733, 0.9749029874801636], "position": [-0.19426175951957703, 0.08680171519517899, 0.06551415473222733, 0.9749029874801636, -0.004877930507063866, 0.006004286929965019, -0.044626154005527496, 0.0014923198614269495] }, { "name": "ring-finger-metacarpal", "rotation": [0, 0, 0, 1], "position": [0, 0, 0, 1, -0.007496153470128775, -0.0030079002026468515, -0.017387796193361282, 0] }, { "name": "middle-finger-tip", "rotation": [-0.4513770341873169, 0.05187453329563141, 0.08099772036075592, 0.8871342539787292], "position": [-0.4513770341873169, 0.05187453329563141, 0.08099772036075592, 0.8871342539787292, 0.0006102180923335254, 0.012269886210560799, -0.08851907402276993, 0.0076750353910028934] }, { "name": "middle-finger-phalanx-distal", "rotation": [-0.4513770341873169, 0.05187453329563141, 0.08099772036075592, 0.8871342539787292], "position": [-0.4513770341873169, 0.05187453329563141, 0.08099772036075592, 0.8871342539787292, 0.0014407262206077576, 0.017412222921848297, -0.07719677686691284, 0.006763150915503502] }, { "name": "middle-finger-phalanx-intermediate", "rotation": [-0.3968125581741333, 0.03632067143917084, 0.03237900137901306, 0.9166091680526733], "position": [-0.3968125581741333, 0.03632067143917084, 0.03237900137901306, 0.9166091680526733, 0.0016664500581100583, 0.018047278746962547, -0.06575116515159607, 0.002328949049115181] }, { "name": "middle-finger-phalanx-proximal", "rotation": [-0.19705697894096375, 0.0356278270483017, 0.013530584052205086, 0.9796510338783264], "position": [-0.19705697894096375, 0.0356278270483017, 0.013530584052205086, 0.9796510338783264, 0.002532052807509899, 0.00816652737557888, -0.04707001522183418, 0.0008624376496300101] }, { "name": "middle-finger-metacarpal", "rotation": [0, 0, 0, 1], "position": [0, 0, 0, 1, 0.001973608508706093, -0.003667897544801235, -0.016989532858133316, 0] }, { "name": "index-finger-tip", "rotation": [-0.5036692023277283, 0.04254351556301117, -0.0017895586788654327, 0.8628465533256531], "position": [-0.5036692023277283, 0.04254351556301117, -0.0017895586788654327, 0.8628465533256531, 0.0122443325817585, 0.015167728066444397, -0.08290348947048187, 0.00622757850214839] }, { "name": "index-finger-phalanx-distal", "rotation": [-0.5036692023277283, 0.04254351556301117, -0.0017895586788654327, 0.8628465533256531], "position": [-0.5036692023277283, 0.04254351556301117, -0.0017895586788654327, 0.8628465533256531, 0.012846658937633038, 0.02035711146891117, -0.07300354540348053, 0.0063438392244279385] }, { "name": "index-finger-phalanx-intermediate", "rotation": [-0.4100058674812317, 0.01276366412639618, -0.008687153458595276, 0.9119522571563721], "position": [-0.4100058674812317, 0.01276366412639618, -0.008687153458595276, 0.9119522571563721, 0.011489620432257652, 0.017548896372318268, -0.0640522837638855, 0.004309865180402994] }, { "name": "index-finger-phalanx-proximal", "rotation": [-0.1811622828245163, -0.0012351499171927571, -0.035139668732881546, 0.9828245043754578], "position": [-0.1811622828245163, -0.0012351499171927571, -0.035139668732881546, 0.9828245043754578, 0.01164238341152668, 0.005513820797204971, -0.047851044684648514, 0.0004420946352183819] }, { "name": "index-finger-metacarpal", "rotation": [0, 0, 0, 1], "position": [0, 0, 0, 1, 0.01007832307368517, -0.00444090086966753, -0.018070772290229797, 0] }, { "name": "thumb-tip", "rotation": [0.004172757267951965, -0.29008519649505615, -0.5815563201904297, 0.7600167393684387], "position": [0.004172757267951965, -0.29008519649505615, -0.5815563201904297, 0.7600167393684387, 0.023994402959942818, 0.007978246547281742, -0.0520763024687767, -0.036934785544872284] }, { "name": "thumb-phalanx-distal", "rotation": [0.004172757267951965, -0.29008519649505615, -0.5815563201904297, 0.7600167393684387], "position": [0.004172757267951965, -0.29008519649505615, -0.5815563201904297, 0.7600167393684387, 0.020383818075060844, 0.007341753225773573, -0.042636506259441376, -0.029934672638773918] }, { "name": "thumb-phalanx-proximal", "rotation": [-0.009617537260055542, -0.22048597037792206, -0.5247167348861694, 0.8221713900566101], "position": [-0.009617537260055542, -0.22048597037792206, -0.5247167348861694, 0.8221713900566101, 0.020876329392194748, 0.005357231013476849, -0.029430240392684937, -0.017101746052503586] }, { "name": "thumb-metacarpal", "rotation": [0.12495491653680801, -0.3539049029350281, -0.5422127842903137, 0.751759946346283], "position": [0.12495491653680801, -0.3539049029350281, -0.5422127842903137, 0.751759946346283, 0.009638515301048756, 0.0006813338259235024, -0.01727612502872944, -0.01374187134206295] }],
        "right": [{ "name": "wrist", "rotation": [-3.725290298461914e-9, -1.4901161193847656e-8, 5.960464477539063e-8, 1], "position": [-3.725290298461914e-9, -1.4901161193847656e-8, 5.960464477539063e-8, 1, -1.0358199631355092e-7, -3.5115959917675355e-8, -8.608733992332418e-8, 4.2220636776763194e-15] }, { "name": "thumb-metacarpal", "rotation": [0.11371050775051117, 0.3591170907020569, 0.5506680607795715, 0.7448956966400146], "position": [0.11371050775051117, 0.3591170907020569, 0.5506680607795715, 0.7448956966400146, -0.009505722671747208, 0.0008533705258741975, -0.017337093129754066, 0.013856199570000172] }, { "name": "thumb-phalanx-proximal", "rotation": [0.07992614060640335, 0.28804734349250793, 0.4962926506996155, 0.8150670528411865], "position": [0.07992614060640335, 0.28804734349250793, 0.4962926506996155, 0.8150670528411865, -0.018598899245262146, 0.0014608502388000488, -0.029985904693603516, 0.01956591010093689] }, { "name": "thumb-phalanx-distal", "rotation": [0.15110386908054352, 0.3835389316082001, 0.5360685586929321, 0.7366790771484375], "position": [0.15110386908054352, 0.3835389316082001, 0.5360685586929321, 0.7366790771484375, -0.017183823511004448, 0.0022791840601712465, -0.04280862957239151, 0.03348913788795471] }, { "name": "thumb-tip", "rotation": [0.15110386908054352, 0.3835389316082001, 0.5360685586929321, 0.7366790771484375], "position": [0.15110386908054352, 0.3835389316082001, 0.5360685586929321, 0.7366790771484375, -0.021927915513515472, 0.004695023410022259, -0.05191735923290253, 0.039832718670368195] }, { "name": "index-finger-metacarpal", "rotation": [-3.725290298461914e-9, -1.4901161193847656e-8, 5.960464477539063e-8, 1], "position": [-3.725290298461914e-9, -1.4901161193847656e-8, 5.960464477539063e-8, 1, -0.010031290352344513, -0.004533369094133377, -0.018116554245352745, 9.749088203392375e-10] }, { "name": "index-finger-phalanx-proximal", "rotation": [-0.13955967128276825, -0.008453931659460068, 0.03284592181444168, 0.9896326661109924], "position": [-0.13955967128276825, -0.008453931659460068, 0.03284592181444168, 0.9896326661109924, -0.012179294601082802, 0.0034650564193725586, -0.04791158810257912, -0.00009775821672519669] }, { "name": "index-finger-phalanx-intermediate", "rotation": [-0.27008891105651855, -0.02007855661213398, 0.005901344586163759, 0.9626079797744751], "position": [-0.27008891105651855, -0.02007855661213398, 0.005901344586163759, 0.9626079797744751, -0.012244390323758125, 0.009398289024829865, -0.06591775268316269, -0.0028353866655379534] }, { "name": "index-finger-phalanx-distal", "rotation": [-0.29880085587501526, -0.04928402602672577, -0.0038003772497177124, 0.9530344605445862], "position": [-0.29880085587501526, -0.04928402602672577, -0.0038003772497177124, 0.9530344605445862, -0.013986580073833466, 0.008356237784028053, -0.07700372487306595, -0.004260093439370394] }, { "name": "index-finger-tip", "rotation": [-0.29880085587501526, -0.04928402602672577, -0.0038003772497177124, 0.9530344605445862], "position": [-0.29880085587501526, -0.04928402602672577, -0.0038003772497177124, 0.9530344605445862, -0.013292690739035606, 0.005503036081790924, -0.08780613541603088, -0.004233165178447962] }, { "name": "middle-finger-metacarpal", "rotation": [-3.725290298461914e-9, -1.4901161193847656e-8, 5.960464477539063e-8, 1], "position": [-3.725290298461914e-9, -1.4901161193847656e-8, 5.960464477539063e-8, 1, -0.001926577533595264, -0.0037141453940421343, -0.017035331577062607, 9.528627886723484e-10] }, { "name": "middle-finger-phalanx-proximal", "rotation": [-0.1806284636259079, -0.0518164336681366, -0.01523120328783989, 0.9820674657821655], "position": [-0.1806284636259079, -0.0518164336681366, -0.01523120328783989, 0.9820674657821655, -0.0033062431029975414, 0.007376314606517553, -0.04715076461434364, -0.0009501894237473607] }, { "name": "middle-finger-phalanx-intermediate", "rotation": [-0.2790217399597168, -0.055265575647354126, -0.031471628695726395, 0.9581764936447144], "position": [-0.2790217399597168, -0.055265575647354126, -0.031471628695726395, 0.9581764936447144, -0.0023117167875170708, 0.010400273837149143, -0.06749209016561508, -0.002290108473971486] }, { "name": "middle-finger-phalanx-distal", "rotation": [-0.2812729477882385, -0.06767505407333374, -0.07392090559005737, 0.9543800950050354], "position": [-0.2812729477882385, -0.06767505407333374, -0.07392090559005737, 0.9543800950050354, -0.001850563334301114, 0.006900113075971603, -0.0804564580321312, -0.006287811789661646] }, { "name": "middle-finger-tip", "rotation": [-0.2812729477882385, -0.06767505407333374, -0.07392090559005737, 0.9543800950050354], "position": [-0.2812729477882385, -0.06767505407333374, -0.07392090559005737, 0.9543800950050354, -0.0008164969040080905, 0.003920428454875946, -0.09251898527145386, -0.007128638215363026] }, { "name": "ring-finger-metacarpal", "rotation": [-3.725290298461914e-9, -1.4901161193847656e-8, 5.960464477539063e-8, 1], "position": [-3.725290298461914e-9, -1.4901161193847656e-8, 5.960464477539063e-8, 1, 0.0074960594065487385, -0.0030079265125095844, -0.01738785207271576, 1.0195001509671897e-9] }, { "name": "ring-finger-phalanx-proximal", "rotation": [-0.1906602531671524, -0.10116900503635406, -0.06717433035373688, 0.9741156101226807], "position": [-0.1906602531671524, -0.10116900503635406, -0.06717433035373688, 0.9741156101226807, 0.004239242989569902, 0.005861624144017696, -0.044704996049404144, -0.0016443205531686544] }, { "name": "ring-finger-phalanx-intermediate", "rotation": [-0.27329349517822266, -0.10145308077335358, -0.11060985177755356, 0.9501491189002991], "position": [-0.27329349517822266, -0.10145308077335358, -0.11060985177755356, 0.9501491189002991, 0.006372697185724974, 0.008052433840930462, -0.06310531497001648, -0.004653489217162132] }, { "name": "ring-finger-phalanx-distal", "rotation": [-0.33763664960861206, -0.06718087196350098, -0.1334013044834137, 0.9293504953384399], "position": [-0.33763664960861206, -0.06718087196350098, -0.1334013044834137, 0.9293504953384399, 0.010346335358917713, 0.009811033494770527, -0.07489235699176788, -0.006282152142375708] }, { "name": "ring-finger-tip", "rotation": [-0.33763664960861206, -0.06718087196350098, -0.1334013044834137, 0.9293504953384399], "position": [-0.33763664960861206, -0.06718087196350098, -0.1334013044834137, 0.9293504953384399, 0.011390568688511848, 0.0064344205893576145, -0.08645893633365631, -0.007807163987308741] }, { "name": "pinky-finger-metacarpal", "rotation": [-0.018311813473701477, -0.1403428614139557, -0.20703598856925964, 0.9680416584014893], "position": [-0.018311813473701477, -0.1403428614139557, -0.20703598856925964, 0.9680416584014893, 0.009715813212096691, -0.0018667129334062338, -0.018192481249570847, -0.003977684304118156] }, { "name": "pinky-finger-phalanx-proximal", "rotation": [-0.22243276238441467, -0.15524396300315857, -0.15625955164432526, 0.9497399926185608], "position": [-0.22243276238441467, -0.15524396300315857, -0.15625955164432526, 0.9497399926185608, 0.011669281870126724, 0.004900503437966108, -0.04123411700129509, -0.0032501742243766785] }, { "name": "pinky-finger-phalanx-intermediate", "rotation": [-0.2960505187511444, -0.18938571214675903, -0.20249636471271515, 0.9140472412109375], "position": [-0.2960505187511444, -0.18938571214675903, -0.20249636471271515, 0.9140472412109375, 0.012178750708699226, 0.006788559723645449, -0.055717773735523224, -0.0069924890995025635] }, { "name": "pinky-finger-phalanx-distal", "rotation": [-0.31323951482772827, -0.13783854246139526, -0.22163531184196472, 0.9131042957305908], "position": [-0.31323951482772827, -0.13783854246139526, -0.22163531184196472, 0.9131042957305908, 0.01754683256149292, 0.005272942129522562, -0.06409378349781036, -0.00874190405011177] }, { "name": "pinky-finger-tip", "rotation": [-0.31323951482772827, -0.13783854246139526, -0.22163531184196472, 0.9131042957305908], "position": [-0.31323951482772827, -0.13783854246139526, -0.22163531184196472, 0.9131042957305908, 0.01907993108034134, 0.002421980956569314, -0.07430993765592575, -0.011126083321869373] }]
    },
    "grab": {
        "left": [{ "name": "wrist", "rotation": [0, 0, 0, 1], "position": [0, 0, 0, 1, 1.977428354393851e-8, -3.0418114249641803e-8, -3.997990383197703e-9, 0] }, { "name": "pinky-finger-tip", "rotation": [0.8708783984184265, 0.16795164346694946, -0.19221478700637817, 0.42001962661743164], "position": [0.8708783984184265, 0.16795164346694946, -0.19221478700637817, 0.42001962661743164, 0.004065152257680893, -0.030776942148804665, -0.00016493916336912662, 0.0038023970555514097] }, { "name": "pinky-finger-phalanx-distal", "rotation": [0.8708783984184265, 0.16795164346694946, -0.19221478700637817, 0.42001962661743164], "position": [0.8708783984184265, 0.16795164346694946, -0.19221478700637817, 0.42001962661743164, 0.005737463943660259, -0.04055450111627579, 0.003930151462554932, 0.006118748802691698] }, { "name": "pinky-finger-phalanx-intermediate", "rotation": [0.9722347259521484, 0.06633684039115906, -0.21208485960960388, -0.07334232330322266], "position": [0.9722347259521484, 0.06633684039115906, -0.21208485960960388, -0.07334232330322266, 0.008420689962804317, -0.04287535697221756, 0.02300157956779003, 0.006331743206828833] }, { "name": "pinky-finger-phalanx-proximal", "rotation": [-0.6174174547195435, 0.017813831567764282, 0.18999755382537842, 0.7631378173828125], "position": [-0.6174174547195435, 0.017813831567764282, 0.18999755382537842, 0.7631378173828125, -0.013982363045215607, 0.022153068333864212, -0.034261465072631836, -0.0032995245419442654] }, { "name": "pinky-finger-metacarpal", "rotation": [-0.018311813473701477, 0.1403428465127945, 0.20703595876693726, 0.9680416584014893], "position": [-0.018311813473701477, 0.1403428465127945, 0.20703595876693726, 0.9680416584014893, -0.009715912863612175, -0.0018666894175112247, -0.018192406743764877, 0.003977662418037653] }, { "name": "ring-finger-tip", "rotation": [0.8443719148635864, 0.08856305480003357, -0.14448745548725128, 0.508247971534729], "position": [0.8443719148635864, 0.08856305480003357, -0.14448745548725128, 0.508247971534729, 0.003570210188627243, -0.0334651954472065, -0.0053489794954657555, -0.0016205977881327271] }, { "name": "ring-finger-phalanx-distal", "rotation": [0.8443719148635864, 0.08856305480003357, -0.14448745548725128, 0.508247971534729], "position": [0.8443719148635864, 0.08856305480003357, -0.14448745548725128, 0.508247971534729, 0.0045967684127390385, -0.04416266456246376, 0.0001425015361746773, 0.00009914069960359484] }, { "name": "ring-finger-phalanx-intermediate", "rotation": [-0.9846799373626709, -0.03177419304847717, 0.1617380976676941, 0.05689137801527977], "position": [-0.9846799373626709, -0.03177419304847717, 0.1617380976676941, 0.05689137801527977, -0.005609964951872826, 0.04946059361100197, -0.02413586527109146, -0.0008570744539611042] }, { "name": "ring-finger-phalanx-proximal", "rotation": [-0.5898150205612183, 0.06471514701843262, 0.10224395990371704, 0.7984211444854736], "position": [-0.5898150205612183, 0.06471514701843262, 0.10224395990371704, 0.7984211444854736, -0.004436171147972345, 0.024442732334136963, -0.03789819777011871, -0.00040514147258363664] }, { "name": "ring-finger-metacarpal", "rotation": [0, 0, 0, 1], "position": [0, 0, 0, 1, -0.007496146485209465, -0.0030079190619289875, -0.017387768253684044, 0] }, { "name": "middle-finger-tip", "rotation": [0.8723084926605225, -0.04665747284889221, -0.09848514199256897, 0.4766567051410675], "position": [0.8723084926605225, -0.04665747284889221, -0.09848514199256897, 0.4766567051410675, 0.001776030519977212, -0.037259552627801895, -0.0060326470993459225, -0.008143825456500053] }, { "name": "middle-finger-phalanx-distal", "rotation": [0.8723084926605225, -0.04665747284889221, -0.09848514199256897, 0.4766567051410675], "position": [0.8723084926605225, -0.04665747284889221, -0.09848514199256897, 0.4766567051410675, 0.0012111874530091882, -0.04843435809016228, -0.0005716345622204244, -0.007075639441609383] }, { "name": "middle-finger-phalanx-intermediate", "rotation": [-0.9935899972915649, 0.003079712390899658, 0.07970646023750305, 0.08010232448577881], "position": [-0.9935899972915649, 0.003079712390899658, 0.07970646023750305, 0.08010232448577881, -0.0015001833671703935, 0.054567091166973114, -0.025237511843442917, 0.004406544845551252] }, { "name": "middle-finger-phalanx-proximal", "rotation": [-0.5412864089012146, 0.053763747215270996, 0.038845986127853394, 0.8382180333137512], "position": [-0.5412864089012146, 0.053763747215270996, 0.038845986127853394, 0.8382180333137512, 0.0032451192382723093, 0.024786703288555145, -0.04072827845811844, 0.00239322311244905] }, { "name": "middle-finger-metacarpal", "rotation": [0, 0, 0, 1], "position": [0, 0, 0, 1, 0.00017065834254026413, -0.004701502621173859, -0.017940115183591843, 0] }, { "name": "index-finger-tip", "rotation": [0.864697277545929, -0.030907275155186653, -0.038552675396203995, 0.499857097864151], "position": [0.864697277545929, -0.030907275155186653, -0.038552675396203995, 0.499857097864151, 0.005139704328030348, -0.04048679396510124, -0.00895158015191555, -0.012084919027984142] }, { "name": "index-finger-phalanx-distal", "rotation": [0.864697277545929, -0.030907275155186653, -0.038552675396203995, 0.499857097864151], "position": [0.864697277545929, -0.030907275155186653, -0.038552675396203995, 0.499857097864151, 0.004848233424127102, -0.0504174642264843, -0.0038009437266737223, -0.011797486804425716] }, { "name": "index-finger-phalanx-intermediate", "rotation": [-0.993180513381958, 0.03935319185256958, 0.030928045511245728, 0.10529623925685883], "position": [-0.993180513381958, 0.03935319185256958, 0.030928045511245728, 0.10529623925685883, 0.0027228104881942272, 0.0548577718436718, -0.02543133683502674, 0.012649601325392723] }, { "name": "index-finger-phalanx-proximal", "rotation": [-0.494282066822052, 0.0306842178106308, -0.03266941010951996, 0.8681454658508301], "position": [-0.494282066822052, 0.0306842178106308, -0.03266941010951996, 0.8681454658508301, 0.011815020814538002, 0.02093340829014778, -0.043116245418787, 0.004364527761936188] }, { "name": "index-finger-metacarpal", "rotation": [0, 0, 0, 1], "position": [0, 0, 0, 1, 0.008275371044874191, -0.006508078891783953, -0.01902134343981743, 0] }, { "name": "thumb-tip", "rotation": [-0.5734550952911377, 0.26677900552749634, -0.7004324197769165, 0.33071547746658325], "position": [-0.5734550952911377, 0.26677900552749634, -0.7004324197769165, 0.33071547746658325, 0.032488685101270676, 0.015365232713520527, -0.03315110132098198, -0.026271594688296318] }, { "name": "thumb-phalanx-distal", "rotation": [-0.5734550952911377, 0.26677900552749634, -0.7004324197769165, 0.33071547746658325], "position": [-0.5734550952911377, 0.26677900552749634, -0.7004324197769165, 0.33071547746658325, 0.0355200320482254, 0.022011488676071167, -0.028879787772893906, -0.01733030192553997] }, { "name": "thumb-phalanx-proximal", "rotation": [-0.3262065351009369, -0.048243001103401184, -0.7308371663093567, 0.5976110696792603], "position": [-0.3262065351009369, -0.048243001103401184, -0.7308371663093567, 0.5976110696792603, 0.02435007132589817, 0.009102681651711464, -0.02616557665169239, -0.01797235943377018] }, { "name": "thumb-metacarpal", "rotation": [-0.1057073250412941, -0.3581407964229584, -0.6951546669006348, 0.6142647862434387], "position": [-0.1057073250412941, -0.3581407964229584, -0.6951546669006348, 0.6142647862434387, 0.008555653505027294, 0.003126424504444003, -0.0170366782695055, -0.01598501391708851] }],
        "right": [{ "name": "wrist", "rotation": [0, 0, 0, 1], "position": [0, 0, 0, 1, -5.821458870514107e-8, 2.949302313481894e-8, -3.6713068141125405e-8, 0] }, { "name": "thumb-metacarpal", "rotation": [-0.07159355282783508, 0.3405008912086487, 0.6890819072723389, 0.6356884241104126], "position": [-0.07159355282783508, 0.3405008912086487, 0.6890819072723389, 0.6356884241104126, -0.009138135239481926, 0.0024812077172100544, -0.016865180805325508, 0.015923533588647842] }, { "name": "thumb-phalanx-proximal", "rotation": [-0.28040963411331177, 0.05896051228046417, 0.7128971815109253, 0.6400560140609741], "position": [-0.28040963411331177, 0.05896051228046417, 0.7128971815109253, 0.6400560140609741, -0.023987609893083572, 0.008136073127388954, -0.02666439674794674, 0.018440432846546173] }, { "name": "thumb-phalanx-distal", "rotation": [-0.5320379734039307, -0.21294216811656952, 0.7065297365188599, 0.41521915793418884], "position": [-0.5320379734039307, -0.21294216811656952, 0.7065297365188599, 0.41521915793418884, -0.03438156843185425, 0.020977899432182312, -0.031064137816429138, 0.019561998546123505] }, { "name": "thumb-tip", "rotation": [-0.5320379734039307, -0.21294216811656952, 0.7065297365188599, 0.41521915793418884], "position": [-0.5320379734039307, -0.21294216811656952, 0.7065297365188599, 0.41521915793418884, -0.03198697045445442, 0.014886310324072838, -0.03637123480439186, 0.028536736965179443] }, { "name": "index-finger-metacarpal", "rotation": [0, 0, 0, 1], "position": [0, 0, 0, 1, -0.008415773510932922, -0.00640616612508893, -0.018979493528604507, 0] }, { "name": "index-finger-phalanx-proximal", "rotation": [-0.5455821752548218, -0.00717569887638092, 0.046469658613204956, 0.8367372751235962], "position": [-0.5455821752548218, -0.00717569887638092, 0.046469658613204956, 0.8367372751235962, -0.010367332026362419, 0.02367319166660309, -0.042073190212249756, -0.004220241215080023] }, { "name": "index-finger-phalanx-intermediate", "rotation": [-0.9971122741699219, -0.03850150480866432, -0.003271684516221285, 0.06537658721208572], "position": [-0.9971122741699219, -0.03850150480866432, -0.003271684516221285, 0.06537658721208572, -0.0027669048868119717, 0.05410474166274071, -0.024131134152412415, -0.01154465414583683] }, { "name": "index-finger-phalanx-distal", "rotation": [0.8411323428153992, 0.04590862989425659, 0.01531633734703064, 0.5386596322059631], "position": [0.8411323428153992, 0.04590862989425659, 0.01531633734703064, 0.5386596322059631, -0.00405474565923214, -0.04867525398731232, -0.005019564181566238, 0.010622799396514893] }, { "name": "index-finger-tip", "rotation": [0.8411323428153992, 0.04590862989425659, 0.01531633734703064, 0.5386596322059631], "position": [0.8411323428153992, 0.04590862989425659, 0.01531633734703064, 0.5386596322059631, -0.004496314562857151, -0.03899162635207176, -0.010618356056511402, 0.010646207258105278] }, { "name": "middle-finger-metacarpal", "rotation": [0, 0, 0, 1], "position": [0, 0, 0, 1, -0.0003110612742602825, -0.004650507587939501, -0.01789827086031437, 0] }, { "name": "middle-finger-phalanx-proximal", "rotation": [-0.5903926491737366, -0.04467901587486267, -0.03736168146133423, 0.805012047290802], "position": [-0.5903926491737366, -0.04467901587486267, -0.03736168146133423, 0.805012047290802, -0.0027839294634759426, 0.02717868611216545, -0.03921051323413849, -0.0023530893959105015] }, { "name": "middle-finger-phalanx-intermediate", "rotation": [0.9962960481643677, 0.0013984739780426025, 0.07149046659469604, -0.047763898968696594], "position": [0.9962960481643677, 0.0013984739780426025, 0.07149046659469604, -0.047763898968696594, -0.001466025016270578, -0.052979812026023865, 0.024254975840449333, 0.004172896035015583] }, { "name": "middle-finger-phalanx-distal", "rotation": [0.8576266765594482, 0.050679802894592285, 0.0878702849149704, 0.5041695237159729], "position": [0.8576266765594482, 0.050679802894592285, 0.0878702849149704, 0.5041695237159729, -0.001087647513486445, -0.04630732163786888, -0.0008399839862249792, 0.006651435513049364] }, { "name": "middle-finger-tip", "rotation": [0.8576266765594482, 0.050679802894592285, 0.0878702849149704, 0.5041695237159729], "position": [0.8576266765594482, 0.050679802894592285, 0.0878702849149704, 0.5041695237159729, -0.0016924120718613267, -0.03530177101492882, -0.006653402931988239, 0.00758709292858839] }, { "name": "ring-finger-metacarpal", "rotation": [0, 0, 0, 1], "position": [0, 0, 0, 1, 0.00749610923230648, -0.003007861552760005, -0.01738780178129673, 0] }, { "name": "ring-finger-phalanx-proximal", "rotation": [-0.6309175491333008, -0.05206027626991272, -0.0999891608953476, 0.7676163911819458], "position": [-0.6309175491333008, -0.05206027626991272, -0.0999891608953476, 0.7676163911819458, 0.004720970522612333, 0.026346443220973015, -0.03655575215816498, 0.0009053578251041472] }, { "name": "ring-finger-phalanx-intermediate", "rotation": [0.9876595139503479, -0.03319499269127846, 0.1509898602962494, -0.025077642872929573], "position": [0.9876595139503479, -0.03319499269127846, 0.1509898602962494, -0.025077642872929573, -0.005172086413949728, -0.04824341833591461, 0.02302688919007778, -0.0011960375122725964] }, { "name": "ring-finger-phalanx-distal", "rotation": [0.8289780616760254, -0.08285313844680786, 0.13380970060825348, 0.5366802215576172], "position": [0.8289780616760254, -0.08285313844680786, 0.13380970060825348, 0.5366802215576172, -0.0039429557509720325, -0.042265284806489944, -0.0004331580421421677, -0.00032650178764015436] }, { "name": "ring-finger-tip", "rotation": [0.8289780616760254, -0.08285313844680786, 0.13380970060825348, 0.5366802215576172], "position": [0.8289780616760254, -0.08285313844680786, 0.13380970060825348, 0.5366802215576172, -0.0029735967982560396, -0.03173357993364334, -0.006283585913479328, 0.0012607593089342117] }, { "name": "pinky-finger-metacarpal", "rotation": [-0.018311843276023865, -0.1403428465127945, -0.20703595876693726, 0.9680416584014893], "position": [-0.018311843276023865, -0.1403428465127945, -0.20703595876693726, 0.9680416584014893, 0.00971585139632225, -0.0018666340038180351, -0.018192432820796967, -0.003977661021053791] }, { "name": "pinky-finger-phalanx-proximal", "rotation": [-0.659694254398346, 0.015357703901827335, -0.17404931783676147, 0.7309408783912659], "position": [-0.659694254398346, 0.015357703901827335, -0.17404931783676147, 0.7309408783912659, 0.014600795693695545, 0.023740602657198906, -0.03271545469760895, 0.004888708703219891] }, { "name": "pinky-finger-phalanx-intermediate", "rotation": [0.9810611605644226, -0.07214350253343582, 0.17556367814540863, -0.03862394019961357], "position": [0.9810611605644226, -0.07214350253343582, 0.17556367814540863, -0.03862394019961357, -0.0072684381157159805, -0.04172022268176079, 0.021763935685157776, -0.007766752038151026] }, { "name": "pinky-finger-phalanx-distal", "rotation": [0.8549655675888062, -0.15549808740615845, 0.15504780411720276, 0.4699089527130127], "position": [0.8549655675888062, -0.15549808740615845, 0.15504780411720276, 0.4699089527130127, -0.0035665174946188927, -0.03881925716996193, 0.002544686198234558, -0.007196327671408653] }, { "name": "pinky-finger-tip", "rotation": [0.8549655675888062, -0.15549808740615845, 0.15504780411720276, 0.4699089527130127], "position": [0.8549655675888062, -0.15549808740615845, 0.15504780411720276, 0.4699089527130127, -0.0020142614375799894, -0.02918120101094246, -0.0021053850650787354, -0.00529690133407712] }]
    },
}


/**
 * Component that can be used to pose the hand.
 * @requires WLE InputComponent
 */
export class HandPoser extends Component {
    static TypeName = 'hand-poser';
    static Properties = {
        BonesRoot: { type: WL.Type.Object },
        handedness: { type: WL.Type.Enum, values: ['left', 'right'], default: 'left' },
        neutralPose: { type: WL.Type.String, default: 'neutral' }
    }

    /** @type {InputComponent} Input Component */
    InputComponent = null;

    originalPose = [];

    start() {
        this.InputComponent = this.object.getComponent('input');
        if (!this.InputComponent) {
            console.error("HandPoser needs an InputComponent");
        }

        for (let o in this.BonesRoot.children) {
            let child = this.BonesRoot.children[o];
            this.originalPose.push({
                name: child.name,
                rotation: [...child.rotationLocal],
                position: [...child.transformLocal]
            });
        }

        if (this.neutralPose) {
            this.setPose(this.neutralPose);
        }

    }

    update(dt) {
        // it would be cool to lerp to different poses...
    }

    resetPose() {
        if (this.neutralPose) {
            this.setPose(this.neutralPose);
        } else {
            this._updatePoseInternal(this.originalPose);
        }
    }

    setPose(poseName) {
        let pose = poses[poseName][this.handedness ? 'right' : 'left'];
        this._updatePoseInternal(pose);
    }

    _updatePoseInternal(pose) {
        for (let index = 0; index < pose.length; index++) {
            const element = pose[index];
            let child = getChildByName(this.BonesRoot, element.name);
            child.rotationLocal = element.rotation;
            child.transformLocal = element.position;
        }
    }
};